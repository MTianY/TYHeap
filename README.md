# 堆 (Heap)

也是一种树状的数据结构, 常见的堆有:

- 二叉堆
- 多叉堆
- 索引堆
- 二项堆
- 斐波那契堆
- 左倾堆
- 斜堆

#### 性质

- 任意节点的值总是 ≥ 或 ≤ 子节点的值.
- 如果任意节点的值总是≥ 子节点的值, 称为: 最大堆、大根堆、大顶堆
- 如果任意节点的值总是≤ 子节点的值, 称为: 最小堆、小根堆、小顶堆
- 所以, 堆中的元素必须具备可比较性.

最大堆_二叉堆

         |-----72-----|
         |            |
    |----68---|    |--50--|
    |         |    |      | 
 |--43--|  |-38   47     21
 |      |  |
 14     40 3
 
 最小堆_二叉堆
 
         |-----4------|
         |            |
    |----17---|    |--45--|
    |         |    |      | 
 |--31--|  |-35   68     54
 |      |  |
 56     33 61


### 二叉堆

二叉堆的逻辑结构就是一个完全二叉树, 所以也叫完全二叉堆.

鉴于其性质, 一般用数组实现二叉堆即可.
                    
                    
              |------72[0]----------|
              |                     |
         |----68[1]------|       |--50[2]--|
         |               |       |         |
      |--43[3]--|     |-38[4]   47[5]     21[6]
      |         |     |
      14[7]     40[8] 3[9]

        
    
| 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 72 | 68 | 50 | 43 | 38 | 47 | 21 | 14 | 40 | 3 |

#### 二叉堆添加

##### 最大堆添加元素

添加元素, 往数组最后面添加, 如果最大堆, 添加的元素过大, 则会影响二叉堆的性质, 所以按下面方法移动元素:

上滤 (SiftUp). 时间复杂度 O(logn)

- 循环执行以下操作
- 添加节点与其父节点比较,因为最大堆任意节点值都大于等于其子节点的值. 如果比父节点大,则交换位置
- 如果小于等于父节点, 或者父节点为空, 则退出循环

#### 二叉堆删除

##### 最大堆删除

不使用数组删除节点的方式, 那种时间复杂度 O(n).

实现下滤(Sift Down), 时间复杂度 O(logn)

- 用最后一个节点覆盖根节点, 并删除最后一个节点
- 循环执行以下操作
    - 如果要删除节点, 放到根节点之后, 小于其子节点,  则与其最大的子节点交换位置
    - 如果要删除节点, 放到根节点之后, 大于等于其子节点, 或者没有子节点, 则退出循环   

#### 最大堆 - 批量建堆

1. 自上而下的上滤
2. 自下而上的下滤


